<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Notes on Stouffer et al. 2012 Science</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/docs.css" rel="stylesheet">
    <link href="/js/google-code-prettify/prettify.css" rel="stylesheet">	
	<link rel="shortcut icon" href="/favicon.ico">    
  </head>
  <body data-spy="scroll" data-target=".subnav" data-offset="50">
	<div class="navbar navbar-fixed-top" style="margin-left: 15%; margin-right: 15%;">
  <div class="navbar-inner">
	<div class="container">
	  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
	  </a>
	  <a class="brand" href="http://schamberlain.github.com/scott">SAC</a>
	  <div class="nav-collapse">
		<ul class="nav">		  
		  <li class="">
			<a href="http://schamberlain.github.com/scott">Home</a>
		  </li>
		  <li class="divider-vertical"></li>
		  <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown">Me<b class="caret"></b></a>
				<ul class="dropdown-menu">					
					<li class=""><a href="http://schamberlain.github.com/scott/about.html" title="About Me">About</a></li>	
					<li class=""><a href="http://schamberlain.github.com/scott/vita.html" title="Vita">Vita</a></li>	
				</ul>
		  </li>	
		  <li class="divider-vertical"></li>
		  <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown">Blogs<b class="caret"></b></a>
				<ul class="dropdown-menu">			
					<li class=""><a href="http://schamberlain.github.com/" title="Recology">Recology</a></li>
					<li class=""><a href="http://jecologyblog.wordpress.com/" title="Journal of Ecology">Journal of Ecology</a></li>
					<li class=""><a href="http://schamberlain.github.com/scott/blog.html" title="Lab Notebook">Lab Notebook</a></li>
				</ul>
		  </li>	
		  <li class="divider-vertical"></li>
		  <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown">Code<b class="caret"></b></a>
				<ul class="dropdown-menu">					
					<li class=""><a href="http://schamberlain.github.com/scott/projects.html" title="Go to Repos">Repos@GitHub</a></li>	
					<li class=""><a href="http://schamberlain.github.com/scott/Rpackages.html" title="Go to R packages">R packages</a></li>	
				</ul>
		  </li>	
		  <li class="divider-vertical"></li>
		  <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown">Research<b class="caret"></b></a>
				<ul class="dropdown-menu">					
					<li class=""><a href="http://schamberlain.github.com/scott/publications.html" title="Publications">Publications</a></li>	
					<li class=""><a href="http://schamberlain.github.com/scott/research.html" title="Research">Research</a></li>	
				</ul>
		  </li>	
		  <li class="divider-vertical"></li><li class="">
		  <li class="divider-vertical"></li>
		  <li class="">
				<li class=""><a href="http://ropensci.org/" title="Go to rOpenSci on GitHub" target="_blank">rOpenSci</a></li>	
		  </li>		  
		  <!-- <li class="divider-vertical"></li> -->
		
			<!--<form class="navbar-search pull-left">
  				<input type="text" class="search-query" placeholder="Search-Coming Soon">
			</form>-->
		<!-- <ul class="nav pull-right">
			<form class="navbar-search pull-right" method=get action="http://google.com/search">
				<input type=hidden name=q value=site:schamberlain.github.com/scott/>
				<input type=text class=search-query name=q>
				<button type=submit class="btn btn-inverse">Search</button>
			</form>
		</ul> -->

		  <li class="divider-vertical"></li>
		</ul>		
	  </div>
	</div>
  </div>
</div>  
	<div class="container">	
		<div class="marketing">
		<div class="content">    
	<div class="row">
	<p><h1>Notes on Stouffer et al. 2012 Science</h1></p>	
	<div class="span3 column">
		<h4><strong>September 20, 2012 <small>.  . <a href="http://schamberlain.github.com/scott/2012/09/20/network-roles/#disqus_thread" data-disqus-identifier="/2012/09/20/network-roles/">Comments</a></small></strong>
		<br/><small>Tags:  <a href="/tags/science" title="View posts tagged with &quot;science&quot;"><u>science</u></a>     <a href="/tags/networks" title="View posts tagged with &quot;networks&quot;"><u>networks</u></a>     <a href="/tags/bipartite" title="View posts tagged with &quot;bipartite&quot;"><u>bipartite</u></a>     <a href="/tags/notes" title="View posts tagged with &quot;notes&quot;"><u>notes</u></a>    </small></h4>
	</div>		
	<div class="span9 column">
		<p class="pull-right"> <a href="/2012/04/12/doing-interviews-chat-with-jai/" title="Previous Post: Notes on doing in-person science interviews"><i class="icon-chevron-left"></i></a> 	    	<a href="/2012/09/26/using-aws/" title="Next Post: Setting up an AMI for RStudio on AWS EC2"><i class="icon-chevron-right"></i></a> 	 </p> 
	</div>
</div>

<div class="row">
	<div class="span12 column">
		<hr>
	</div>
</div>

    <h3>Notes</h3>

<ul>
<li>title was "Evolutionary conservation of species' roles in food webs"</li>
<li>used 32 empirical food webs</li>
<li>questions were:

<ul>
<li>do species have consistent "roles" across different food webs they are embedded in, and</li>
<li>are species roles phylogenetically conserved</li>
</ul>
</li>
<li>Found that

<ul>
<li>species roles (motifs) are conserved across different communities</li>
<li>species benefit to the community (they call dynamic importance - bascially is the impact that the motif they are in has on community persistence simulations of the empirical networks) is homogenous - closely related species to have similar benefit to their community than expected at random</li>
<li>at larger taxonomic scales, they show that phyla, classes, orders, and families, tend to play similar roles betlween New Zealand food webs, and all other food webs.</li>
</ul>
</li>
<li>Other questions

<ul>
<li>What are the mechanisms for the evolutionary conservation of species roles?

<ul>
<li>Is it related to similarity in traits?</li>
<li>or possibly similarity in abundance?</li>
</ul>
</li>
<li>Is there conservation of species roles in mutualistic plant-pollinator networks?

<ul>
<li>this paper only looked at food webs.</li>
</ul>
</li>
</ul>
</li>
<li>Potential problems

<ul>
<li>they did not provide code, so can't necessarily replicate what they did</li>
<li>can we look at where species are in motifs with bipartite networks?  that is, species of similar type (plants) can’t interact with one another

<ul>
<li>probably: just means that motifs are of a more limited set, that is, whereas in a food web you can have a triangle, you can only have an open triangle in a bipartite network</li>
</ul>
</li>
</ul>
</li>
</ul>


<p><img src="http://schamberlain.github.com/scott/img/triangle.png" alt="triangle" /></p>

<p>VS.</p>

<p><img src="http://schamberlain.github.com/scott/img/triangle_open.png" alt="triangle" /></p>

<ul>
<li>Code: asked for code form Daniel Stouffer - it was not provided in the paper</li>
</ul>


<h3>How can we do something similar with bipartite networks?</h3>

<ul>
<li>Problems, in bipartite networks:

<ul>
<li>there is no directionality to links, so that decreases the unique graphlets/motifs</li>
</ul>
</li>
<li>Possible solutions:

<ul>
<li>Use modules? (Olesen <em>et. al.</em> 2007) talk about modules as roles in bipartite networks, however this isn't the same as motifs. Motifs/graphlets are asking what roles do species play in sub-structures of the network, whereas with modules we can say whether a species plays the role of a module hub, network hub, connector, or peripheral (according to Olesen terminology).  But this isn't the same as motif/graphlets.</li>
</ul>
</li>
</ul>


<div class="highlight"><pre><code class="r">library<span class="p">(</span>bipartite<span class="p">)</span>
data<span class="p">(</span>small1976<span class="p">)</span>
res <span class="o">&lt;-</span> computeModules<span class="p">(</span>small1976<span class="p">)</span>  <span class="c1"># takes several minutes!</span>
plotModuleWeb<span class="p">(</span>res<span class="p">)</span>
</code></pre></div>


<p><img src="http://schamberlain.github.com/scott/img/modules.png" alt="center" /></p>

<pre><code>+ Converting bipartite two-mode networks to one-mode networks
    + One option is to convert two-mode bipartite networks into one-mode networks, which results in two one-mode networks, one for plants and one for pollinators.  Then, each one-mode network represents links shared by species in the same partite.  With this, one can look at motifs and graphlets, but what does that mean?  If a certain plant species X is found in a lot of motifs of a certain kind, does that tell us anything about the two-mode bipartite network of plant-pollinator interactions?
</code></pre>

<div class="highlight"><pre><code class="r">library<span class="p">(</span>tnet<span class="p">)</span>
library<span class="p">(</span>bipartite<span class="p">)</span>

data<span class="p">(</span>small1976<span class="p">)</span>  <span class="c1"># load small1976 network (it’s a matrix)</span>
mat <span class="o">&lt;-</span> as.data.frame<span class="p">(</span>small1976<span class="p">)</span>  <span class="c1"># convert to data.frame</span>
mat <span class="o">&lt;-</span> mat<span class="p">[,</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">]</span>  <span class="c1"># get samller matrix for ease</span>
plotweb<span class="p">(</span>mat<span class="p">)</span>  <span class="c1"># bipartite plot</span>
</code></pre></div>


<p><img src="http://schamberlain.github.com/scott/img/twovsonemode1.png" alt="center" /></p>

<div class="highlight"><pre><code class="r">row.names<span class="p">(</span>mat<span class="p">)</span> <span class="o">&lt;-</span> <span class="kc">NULL</span>
mat_elist <span class="o">&lt;-</span> web2edges<span class="p">(</span>mat<span class="p">,</span> <span class="kr">return</span> <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>  <span class="c1"># convert to edgelist</span>
mat_onemode <span class="o">&lt;-</span> projecting_tm<span class="p">(</span>mat_elist<span class="p">,</span> method <span class="o">=</span> <span class="s">&quot;Newman&quot;</span><span class="p">)</span>  <span class="c1"># make into one-mode network</span>
mat_onemode_i <span class="o">&lt;-</span> tnet_igraph<span class="p">(</span>mat_onemode<span class="p">,</span> directed <span class="o">=</span> <span class="k-Variable">F</span><span class="p">)</span>  <span class="c1"># convert to igraph object for plotting</span>
plot<span class="p">(</span>mat_onemode_i<span class="p">)</span>  <span class="c1"># plot one-mode undirected graph</span>
</code></pre></div>


<p><img src="http://schamberlain.github.com/scott/img/twovsonemode2.png" alt="NA" /></p>

<pre><code>+ or maybe we can do this: 
</code></pre>

<div class="highlight"><pre><code class="r">library<span class="p">(</span>tnet<span class="p">)</span>
library<span class="p">(</span>bipartite<span class="p">)</span>
library<span class="p">(</span>reshape2<span class="p">)</span>
library<span class="p">(</span>ggplot2<span class="p">)</span>

data<span class="p">(</span>small1976<span class="p">)</span>  <span class="c1"># load small1976 network (it’s a matrix)</span>
mat <span class="o">&lt;-</span> as.data.frame<span class="p">(</span>small1976<span class="p">)</span>  <span class="c1"># convert to data.frame</span>
mat <span class="o">&lt;-</span> mat<span class="p">[,</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">]</span>  <span class="c1"># get samller matrix for ease</span>
<span class="c1"># plotweb(mat) # bipartite plot</span>
row.names<span class="p">(</span>mat<span class="p">)</span> <span class="o">&lt;-</span> <span class="kc">NULL</span>
mat_elist <span class="o">&lt;-</span> web2edges<span class="p">(</span>mat<span class="p">,</span> <span class="kr">return</span> <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>  <span class="c1"># convert to edgelist</span>
onemode_plants <span class="o">&lt;-</span> projecting_tm<span class="p">(</span>mat_elist<span class="p">,</span> method <span class="o">=</span> <span class="s">&quot;Newman&quot;</span><span class="p">)</span>  <span class="c1"># make into one-mode network</span>

<span class="c1"># Insects (columns of mat)</span>
mat2 <span class="o">&lt;-</span> matrix<span class="p">(</span>c<span class="p">(</span>mat_elist<span class="p">[,</span> <span class="m">2</span><span class="p">],</span> mat_elist<span class="p">[,</span> <span class="m">1</span><span class="p">],</span> mat_elist<span class="p">[,</span> <span class="m">3</span><span class="p">]),</span> ncol <span class="o">=</span> <span class="m">3</span><span class="p">)</span>  <span class="c1"># rearrange to get pollinators in first column</span>
onemode_pollinators <span class="o">&lt;-</span> projecting_tm<span class="p">(</span>mat2<span class="p">,</span> method <span class="o">=</span> <span class="s">&quot;Newman&quot;</span><span class="p">)</span>  <span class="c1"># make into one-mode network</span>

<span class="c1"># Combine into one matrix</span>
dimnames<span class="p">(</span>mat_elist<span class="p">)[[</span><span class="m">2</span><span class="p">]]</span> <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;i&quot;</span><span class="p">,</span> <span class="s">&quot;j&quot;</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">)</span>
dimnames<span class="p">(</span>onemode_plants<span class="p">)[[</span><span class="m">2</span><span class="p">]]</span> <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;i&quot;</span><span class="p">,</span> <span class="s">&quot;j&quot;</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">)</span>
dimnames<span class="p">(</span>onemode_pollinators<span class="p">)[[</span><span class="m">2</span><span class="p">]]</span> <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;i&quot;</span><span class="p">,</span> <span class="s">&quot;j&quot;</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">)</span>
ee <span class="o">&lt;-</span> rbind<span class="p">(</span>mat_elist<span class="p">,</span> onemode_plants<span class="p">,</span> onemode_pollinators<span class="p">)</span>
ee_ <span class="o">&lt;-</span> dcast<span class="p">(</span>ee<span class="p">,</span> i <span class="o">~</span> j<span class="p">,</span> value.var <span class="o">=</span> <span class="s">&quot;w&quot;</span><span class="p">)</span>
ee_<span class="p">[</span>is.na<span class="p">(</span>ee_<span class="p">)]</span> <span class="o">&lt;-</span> <span class="m">0</span>
row.names<span class="p">(</span>ee_<span class="p">)</span> <span class="o">&lt;-</span> ee_<span class="p">[,</span> <span class="m">1</span><span class="p">]</span>
ee_ <span class="o">&lt;-</span> ee_<span class="p">[,</span> <span class="m">-1</span><span class="p">]</span>

<span class="c1"># Plotting it</span>
ee__ <span class="o">&lt;-</span> tnet_igraph<span class="p">(</span>ee<span class="p">,</span> directed <span class="o">=</span> <span class="k-Variable">F</span><span class="p">)</span>
plot<span class="p">(</span>ee__<span class="p">)</span>  <span class="c1"># where noddes 1-13 are plants, and 14-23 are pollinators</span>
</code></pre></div>


<p><img src="http://schamberlain.github.com/scott/img/other.png" alt="center" /></p>

<p>Basically a network of plant-pollinator interactions together with the putative competitive/facilitative interactions within each partite (plants and pollinators). Obviously this graph needs coloring for the different types of nodes...</p>

<hr />

<h4>Get the .Rmd file used to create this post <a href="https://github.com/SChamberlain/scott/blob/master/_drafts/2012-09-20-network-roles.Rmd">at my github account</a> - or <a href="https://github.com/SChamberlain/scott/tree/master/_posts/2012-09-20-network-roles.md">.md file</a>.</h4>

<h4>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>, and nice knitr highlighting/etc. in in <a href="http://rstudio.org/">RStudio</a>.</h4>

<hr />

<h4>References</h4>

<p>Olesen JM, Bascompte J, Dupont YL and Jordano P (2007).
&ldquo;The Modularity of Pollination Networks.&rdquo;
<EM>Proceedings of The National Academy of Sciences</EM>, <B>104</B>.
ISSN 0027-8424, <a href="http://dx.doi.org/10.1073/pnas.0706375104">http://dx.doi.org/10.1073/pnas.0706375104</a>.

		
</div>
    

		</div>
		 <footer class="footer">		        
	<p class="pull-right"> <a href="/2012/04/12/doing-interviews-chat-with-jai/" title="Previous Post: Notes on doing in-person science interviews">&laquo; Previous Blog Post</a> 	  |  <a href="#">Back to top</a>  |   	<a href="/2012/09/26/using-aws/" title="Next Post: Setting up an AMI for RStudio on AWS EC2">Next Blog Post &raquo; </a> 	 </p> 

	<br><br/>
	<br><br/>
    
	<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'scln'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	<p>Designed and built using <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>, <a href="http://jekyllrb.com/"  target="_blank">Jekyll</a>, slightly modified by <a href="https://github.com/erjjones" target="_blank">Erjjones</a>, and even more modified by <a href="https://github.com/schamberlain" target="_blank">schamberlain</a>.</p>
	<p>Code licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>. Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
	<p>Icons from <a href="http://glyphicons.com">Glyphicons Free</a>, licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>	
	<p>Page last generated on February 25, 2013</p>				
</footer>
	 </div>    
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="/js/jquery.js"></script>
    <script src="/js/google-code-prettify/prettify.js"></script>
    <script src="/js/bootstrap-transition.js"></script>
    <script src="/js/bootstrap-alert.js"></script>
    <script src="/js/bootstrap-modal.js"></script>
    <script src="/js/bootstrap-dropdown.js"></script>
    <script src="/js/bootstrap-scrollspy.js"></script>
    <script src="/js/bootstrap-tab.js"></script>
    <script src="/js/bootstrap-tooltip.js"></script>
    <script src="/js/bootstrap-popover.js"></script>
    <script src="/js/bootstrap-button.js"></script>
    <script src="/js/bootstrap-collapse.js"></script>
    <script src="/js/bootstrap-carousel.js"></script>
    <script src="/js/bootstrap-typeahead.js"></script>
    <script src="/js/application.js"></script>
	<script src="/js/custom.js" type="text/javascript"></script>	
	
	<script type="text/javascript">
		/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		var disqus_shortname = 'scln'; // required: replace example with your forum shortname

		/* * * DON'T EDIT BELOW THIS LINE * * */
		(function () {
			var s = document.createElement('script'); s.async = true;
			s.type = 'text/javascript';
			s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
			(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
		}());
	</script>
	
	<!-- Google Analytics -->
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-28148190-1']);
	  _gaq.push(['_trackPageview']);

	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>	
  </body>
</html>
